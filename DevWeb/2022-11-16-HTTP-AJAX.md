> <span style="font-size: 1.5em">ğŸ“–</span> <span style="color: orange; font-size: 1.3em;">PrÃ©sentation [Chapitre 6 : HTTP et Ajax](https://he-arc.github.io/slides-devweb/06-HTTPandAJAX.html)</span>


# HTTP
HyperText Transfer Protocol

InventÃ© en Suisse, au CERN

Protocole de niveau 7

Contenu :
- Texte
- Binaire (depuis HTTP2)
> Encodage du binaires en texte : Base64 (prend 50% de place en plus qu'un binaire pure)

EntÃªtes aussi bien dans les requÃªtes que dans les rÃ©ponses


Verbes HTTP principaux :
- GET
- POST
- PUT/PATCH
- DELETE
- HEAD

RequÃªte : Verbe + URI

Que sÃ©pare l'entÃªte du corps : une ligne vide (2 retour Ã  la ligne)


## EntÃªte de requÃªte
- Host : Obligatoire (car on hÃ©berge plusieurs adresse sur un mÃªme serveur)
  - Permet d'atteindre le bon service
- Referer : Adresse de la page qui a fait la requÃªte (si on tape dans l'URL, valeur vide)
- User-Agent : Navigateur utilisÃ©

## EntÃªte de rÃ©ponse
- Content-Type : Type de contenu (JSON, image, etc)
  - Pour que le navigateur sache comment traiter/parser le contenu
  - Syntaxe MIME : image/jpeg, text/html, application/json, etc
- Set-Cookie : Conteneur
  - Qui a accÃ¨s : limitÃ© au domaine qui les a crÃ©Ã©
- Location : Redirection


## Codes de rÃ©ponses
- 1xx : Information
- 2xx : SuccÃ¨s
- 3xx : Redirection
  - 301 : Moved Permanently
  - 302 : Found
  - Exemple : 301 : abc.ch -> abc.com
- 4xx : Erreur client
- 5xx : Erreur serveur
  - ProvoquÃ© par un fichier qui fait planter le serveur avant le renvoie de la vue
  - Bonne pratique : si on voie une erreur 500, regarder les logs Laravel

## Verbes
Verbe | Description
--- | ---
<span style="color: blue">GET</span> | Demander une ressource
POST | CrÃ©ation dâ€™une ressource
<span style="color: magenta">PUT</span> | Remplacement total dâ€™une ressource
PATCH | Remplacement partiel dâ€™une ressource
<span style="color: magenta">DELETE</span> | Suppression dâ€™une ressource
<span style="color: blue">HEAD</span> | Demande lâ€™entÃªte de la rÃ©ponse, sans la ressource

Autres verbes : <span style="color: blue">TRACE</span>, <span style="color: blue">OPTIONS</span>, CONNECT

> Put : rÃ©Ã©crit tout les attributs (mÃªme s'il ne changent pas)
> Patch : rÃ©Ã©crit seulement les attributs qui ont changÃ©

<span style="color: blue">SÃ»res</span> : ne modifie pas l'Ã©tat du serveur
<span style="color: magenta">Idempotentes</span> : Le systÃ¨me change d'Ã©tat la premiÃ¨re fois, puis reste dans le nouvel Ã©tat les fois suivantes
> Un verbe sÃ»re est idempotent, mais pas l'inverse

> Attention Ã  conserver que des actions "sÃ»res" dans celles spÃ©cifiÃ©es.
> Car par exemple les bots de Google vont essayer tous les liens GET du site, et donc executer l'action.
> Si par exemple l'action GET permet de vider la table des utilisateurs, l'action sera executÃ©e --> <span style="color: red">problÃ¨me</span>


## Exemple d'Ã©change

![](Screen/2022-11-16-13-33-38.png)

requÃªte GET : les arguments sont dans l'URL
requÃªte POST : les arguments viennent dans le corps de la requÃªte

-----
-----
-----

Pourquoi JSON est populaire
- JS Object Notation
- Car c'est litÃ©rallement un objet JS, donc dÃ©jÃ  sÃ©rialisÃ©